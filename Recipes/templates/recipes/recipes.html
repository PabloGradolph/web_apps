{% extends "base.html" %}

{% block title %}
Recipe
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/recipes.css') }}">
<!-- SWIPER CSS-->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>
{% endblock %}

{% block content %}

{% if current_user.is_authenticated %}
    <div class="recipe-bookmark">
        <h3>ü§é <span class="bookmark">Save Recipe</span></h3>
    </div>
{% endif %}

<h1 class="recipe-title">{{ recipe.title }}</h1>
<div class="user-image">
    <img src="{{ url_for('static', filename='imgs/profile_picture.jpeg') }}" alt="Profile Picture">
    <span class="user"> Submitted by chef <a href="{{ url_for('main.user', user_id=user.id) }}"> {{ user.username }}</a></span>    
</div>


<div class="recipe-info">
    <div class="recipe-servings">
        <h3>üë• <span class="servings-count">{{ recipe.servings }}</span></h3>
    </div>
    <div class="recipe-cook_time">
        <h3>‚è≤Ô∏è <span class="cook_time-count">{{ recipe.cook_time }}'</span></h3>
    </div>
    <div class="recipe-type_food">
        <h3>üçΩÔ∏è <span class="type_food-count">{{ recipe.type_food }}</span></h3>
    </div>
    <div class="recipe-category_food">
        <h3>üç¥ <span class="category_food-count">{{ recipe.category_food }}</span></h3>
    </div>
    <div class="recipe-rating">
        <h3>‚≠ê <span class="rating-count">{{ rating }}/5</span></h3>
    </div>
</div>


<div class="recipe-card">
    <div class="card-columns">
        <!-- Column 1 -->
        <div class="card-column1">
            <!-- Tab links -->
            <div class="tab">
                <button class="tablinks" onclick="openTab(event, 'Description')" id="default">üìù Description</button>
                <button class="tablinks" onclick="openTab(event, 'Steps')">üî¢ Steps</button>
                <button class="tablinks" onclick="openTab(event, 'Rate')">‚≠ê Rate</button>
            </div>
            
            <!-- Tab content -->
            <div id="Description" class="tabcontent">
                <h2>üìù Description</h2>
                <p>{{ recipe.description }}</p>
            </div>
            
            <div id="Steps" class="tabcontent">
                <h2>üî¢ Steps</h2>
                {% for step in recipe.steps %}
                <p>{{ step.sequence_number }}. <span class="step-description">{{ step.description }}</span></p>
                {% endfor %}
            </div>
            
            <div id="Rate" class="tabcontent">
                <h2>‚≠ê Rate</h2>
                <p>Chef, rate this recipe!</p>
            </div>
            <script>
                function openTab(evt, Name) {
                    // Declare all variables
                    var i, tabcontent, tablinks;

                    // Get all elements with class="tabcontent" and hide them
                    tabcontent = document.getElementsByClassName("tabcontent");
                    for (i = 0; i < tabcontent.length; i++) {
                        tabcontent[i].style.display = "none";
                    }

                    // Get all elements with class="tablinks" and remove the class "active"
                    tablinks = document.getElementsByClassName("tablinks");
                    for (i = 0; i < tablinks.length; i++) {
                        tablinks[i].className = tablinks[i].className.replace(" active", "");
                    }

                    // Show the current tab, and add an "active" class to the button that opened the tab
                    document.getElementById(Name).style.display = "block";
                    evt.currentTarget.className += " active";
                    }

                    // Get the element with id="defaultOpen" and click on it
                    document.getElementById("default").click();
            </script>

            
        </div>
    
        <!-- Column 2 -->
        <div class="card-column2">
            <div class="card-image">
                <div class="container section__border">
                    <div class="recipes__container swiper">
                        <div class="swiper-wrapper">
                            <!--Bucle for aqu√≠ con las 5 recetas m√°s valoradas-->
                            <div class="recipes__content swiper-slide">
                                <div>
                                    <img src="{{ url_for('static', filename='imgs/photo_recipe.jpg')}}" alt="recipe image" class="recipes__img">
                                </div>
                            </div>
            
                            <div class="recipes__content swiper-slide">
                                <div>
                                    <img src="{{ url_for('static', filename='imgs/photo_recipe.jpg')}}" alt="recipe image" class="recipes__img">
                                </div>
                            </div>
            
                            <div class="recipes__content swiper-slide">
                                <div>
                                    <img src="{{ url_for('static', filename='imgs/photo_recipe.jpg')}}" alt="recipe image" class="recipes__img">
                                </div>
                            </div>
            
                            <div class="recipes__content swiper-slide">
                                <div>
                                    <img src="{{ url_for('static', filename='imgs/photo_recipe.jpg')}}" alt="recipe image" class="recipes__img">
                                </div>
                            </div>
                        </div>
                        
                        <!-- SWIPER ARROWS AND PAGINATION-->
                        <div class="swiper-button-next">
                            <i class="ri-arrow-right-s-line"></i>
                        </div>
                        <div class="swiper-button-prev">
                            <i class="ri-arrow-left-s-line"></i>
                        </div>
                        <div class="swiper-pagination"></div>
            
                    </div>
                </div>
            </section>
            <!-- SWIPER JS -->
            <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
            <script>let swiper = new Swiper(".swiper", {
                loop: true,
                spaceBetween: 24,
            
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                pagination: {
                    el: ".swiper-pagination",
                },
                breakpoints: {
                    1200: {
                        slidesPerView: 2,
                        spaceBetween: 0,
                    }
                },
            });
            window.addEventListener('load', function() {
                var slides = document.querySelectorAll('.swiper-slide');
                slides.forEach(function(slide) {
                    slide.style.marginRight = '0px';
                });
            });</script>
            </div>
        </div>
    </div>
</div>



{% endblock %}
